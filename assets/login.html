<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>登录界面</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/foot.css">
    <link rel="stylesheet" href="font/iconfont.css">
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/register.css">
    <link rel="stylesheet" href="css/login.css">

</head>
<body>
<!--top-->
<div class="logo_head_1">
    <div class="logo_head">
        <div class="load_head_left">
            <a href="#">
                <img src="img/koloa.jpg" alt="logo">
            </a>
        </div>
    </div>
</div>
<!--center-->
<div class="center_1" id="center_2">
    <div class="center">
        <img src="img/loginBg.jpg" alt="">
        <div class="regMenu_1">
            <div class="regMenu">
                <div class="regMenu_top">
                    <span class="text login_text" ><a id="log_1" href="#">手机号登陆</a></span>
                    <span class="text login_text" ><a id="log_2" href="#">邮箱登陆</a></span>
                </div>
                <div class="regMenu_bottom">
                    <div class="suo">
                        <i class="icon iconfont icon-suo"></i>
                        <span><a id="passlogin" href="#">使用密码验证登录</a></span>
                    </div>
                    <form action="#">
                        <div class="top_phone">
                            <span>
                                <i class="icon iconfont icon-phone"></i>
                            </span>
                            <input id="phone" name="phone" type="text" placeholder="请输入手机号">
                        </div>
                        <div class="top_img">
                            <img src="img/huakuai.bmp" alt="">
                        </div>
                        <div class="top_message">
                            <input id="message" name="message" type="text" placeholder="请输入短信验证码">
                            <span><a href="#">获取验证码</a></span>
                        </div>
                        <div class="registerBtn">
                            <a href="#">登录</a>
                        </div>
                        <div class="agree">
                            <input class="checkBox" checked type="checkbox">
                            <span>10天免登录</span>
                            <span class="question">遇到问题 ?</span>
                        </div>
                    </form>
                </div>
                <div class="regMenu_foot">
                    <ul>
                        <li>
                            <a href="#">
                                <i class="icon iconfont icon-weixin-copy"></i>
                            </a>
                        </li>
                        <li>
                            <a href="#">
                                <i class="icon iconfont icon-zhifubao"></i>
                            </a>
                        </li>
                        <li>
                            <a href="#">
                                <i class="icon iconfont icon-logo-weibo"></i>
                            </a>
                        </li>
                        <li>
                            <a href="#">
                                <i class="icon iconfont icon-qq"></i>
                            </a>
                        </li>
                    </ul>
                    <span>
                        <a class="kuaijie" href="register.html">
                            手机快捷注册
                            <em>
                                <i class="icon iconfont icon-dayuhao"></i>
                            </em>
                        </a>
                    </span>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="center_1"  id="center_3">
    <div class="center">
        <img src="img/loginBg.jpg" alt="">
        <div class="regMenu_1 ">
            <div class="regMenu regMenu_2">
                <div class="regMenu_top">
                    <span class="text login_text" ><a id="log_3" href="#">手机号登陆</a></span>
                    <span class="text login_text" ><a id="log_4" href="#">邮箱登陆</a></span>
                </div>
                <div class="regMenu_bottom regMenu_bottom_2">
                    <form action="#">
                        <div class="top_email">
                            <span>
                                <i class="icon iconfont icon-email"></i>
                            </span>
                            <input id="eMail" name="eMail" type="text" placeholder="网易邮箱账号">
                        </div>
                        <div class="top_password">
                            <span>
                                <i class="icon iconfont icon-suo"></i>
                            </span>
                            <input id="password" name="password" type="text" placeholder="密码">
                        </div>
                        <div class="registerBtn">
                            <a href="#">登录</a>
                        </div>
                        <div class="agree">
                            <input class="checkBox" checked type="checkbox">
                            <span>10天免登录</span>
                            <span class="question">忘记密码</span>
                        </div>
                    </form>
                </div>
                <div class="regMenu_foot_1">
                    <ul>
                        <li>
                            <a href="#">
                                <i class="icon iconfont icon-weixin-copy"></i>
                            </a>
                        </li>
                        <li>
                            <a href="#">
                                <i class="icon iconfont icon-zhifubao"></i>
                            </a>
                        </li>
                        <li>
                            <a href="#">
                                <i class="icon iconfont icon-logo-weibo"></i>
                            </a>
                        </li>
                        <li>
                            <a href="#">
                                <i class="icon iconfont icon-qq"></i>
                            </a>
                        </li>
                    </ul>
                    <span>
                        <a class="kuaijie" href="#">
                            手机快捷注册
                            <em>
                                <i class="icon iconfont icon-dayuhao"></i>
                            </em>
                        </a>
                    </span>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="center_1" id="center_4">
    <div class="center">
        <img src="img/loginBg.jpg" alt="">
        <div class="regMenu_1">
            <div class="regMenu">
                <div class="regMenu_top">
                    <span class="text login_text" ><a id="log_5" href="#">手机号登陆</a></span>
                    <span class="text login_text" ><a id="log_6" href="#">邮箱登陆</a></span>
                </div>
                <div class="regMenu_bottom">
                    <div class="suo">
                        <i class="icon iconfont icon-duanxin"></i>
                        <span><a id="messlogin" href="#">使用短信验证登录</a></span>
                    </div>
                    <form action="#">
                        <div class="top_phone" id="top_phone_02">
                            <span>
                                <i class="icon iconfont icon-phone"></i>
                            </span>
                            <input id="phone2" name="phone" type="text" placeholder="请输入手机号">
                        </div>
                        <div class="top_password" id="top_password_2">
                            <span>
                                <i class="icon iconfont icon-suo"></i>
                            </span>
                            <input id="password2" name="password" type="password" placeholder="密码">
                        </div>
                        <div id="reg">

                        </div>
                        <div class="registerBtn">
                            <a id="login" href="#">登录</a>
                        </div>
                        <div class="agree">
                            <input class="checkBox" checked type="checkbox">
                            <span>10天免登录</span>
                            <span class="question">忘记密码？</span>
                        </div>
                    </form>
                </div>
                <div class="regMenu_foot">
                    <ul>
                        <li>
                            <a href="#">
                                <i class="icon iconfont icon-weixin-copy"></i>
                            </a>
                        </li>
                        <li>
                            <a href="#">
                                <i class="icon iconfont icon-zhifubao"></i>
                            </a>
                        </li>
                        <li>
                            <a href="#">
                                <i class="icon iconfont icon-logo-weibo"></i>
                            </a>
                        </li>
                        <li>
                            <a href="#">
                                <i class="icon iconfont icon-qq"></i>
                            </a>
                        </li>
                    </ul>
                    <span>
                        <a class="kuaijie" href="register.html">
                            手机快捷注册
                            <em>
                                <i class="icon iconfont icon-dayuhao"></i>
                            </em>
                        </a>
                    </span>
                </div>
            </div>
        </div>
    </div>
</div>
<!--foot-->
<div class="footer_1 login_foot">
    <div class="footer">
        <div class="footer_div_01">
            <a href="#">About NetEase</a>
            <span class="sep">|</span>
            <a href="#">公司简介</a>
            <span class="sep">|</span>
            <a href="#">联系方法</a>
            <span class="sep">|</span>
            <a href="#">友情链接</a>
            <span class="sep">|</span>
            <a href="#">招聘信息</a>
            <span class="sep">|</span>
            <a href="#">客户服务</a>
            <span class="sep">|</span>
            <a href="#">隐私政策</a>
            <span class="sep">|</span>
            <a href="#">网络营销</a>
            <span class="sep">|</span>
            <a href="#">网易考拉</a>
        </div>
        <div>
            <span>网络文化经营许可证：浙网文[2016]0155-055号</span>
            <span>增值电信业务经营许可证：浙B2-20160288</span>
            <span><a href="#">自营经营者信息</a></span>
            <span>（浙）网械平台备字[2018]第00007号</span>
        </div>
        <div>
                    <span class="foot_span">
                        <a href="#"><img src="img/jinghui.png" alt=""></a>
                        <a href="#">（浙）网械平台备字[2018]第00007号</a>
                    </span>
            <span>网易公司版权所有©1997-2018</span>
            <span><a href="#">互联网药品信息服务资格证书编号（浙）-2017-0027</a></span>
            <span>浙ICP备16011229号-6</span>
        </div>
        <div class="foot-div">
            <a href="#"><img src="img/chengxin.png" alt=""></a>
            <a href="#"><img src="img/kexin.png" alt=""></a>
            <a href="#"><img src="img/gongan.gif" alt=""></a>
        </div>
    </div>
</div>
<script>
    /*登录切换*/
    var log1=document.getElementById("log_1");
    var log2=document.getElementById("log_2");
    var log3=document.getElementById("log_3");
    var log4=document.getElementById("log_4");
    var log6=document.getElementById("log_6");
    var center_2=document.getElementById("center_2");
    var center_3=document.getElementById("center_3");
    var center_4=document.getElementById("center_4");
    var passlogin=document.getElementById("passlogin");
    var messlogin=document.getElementById("messlogin");
    messlogin.addEventListener("click",messloginHandler);
    passlogin.addEventListener("click",passloginHandlder);
    center_3.style.display="none";
    center_4.style.display="none";
    log1.addEventListener("click",clickHandler1);
    log2.addEventListener("click",clickHandler2);
    log3.addEventListener("click",clickHandler3);
    log4.addEventListener("click",clickHandler4);
    log6.addEventListener("click",clickHandler6);
    function passloginHandlder(e) {
        center_4.style.display="block";
        center_2.style.display="none";
        center_3.style.display="none";
    }
    function messloginHandler(e) {
        center_4.style.display="none";
        center_2.style.display="block";
        center_3.style.display="none";
    }
    function clickHandler6(e) {
        center_2.style.display="none";
        center_3.style.display="block";
        center_4.style.display="none";
    }
    function clickHandler1(e) {
        center_2.style.display="block";
        center_3.style.display="none";
    }
    function clickHandler2(e) {
        center_2.style.display="none";
        center_3.style.display="block";
    }
    function clickHandler3(e) {
        center_2.style.display="block";
        center_3.style.display="none";
    }
    function clickHandler4(e) {
        center_2.style.display="none";
        center_3.style.display="block";
    }
    /*登录实现*/
    var login=document.getElementById("login");
    var phone=document.getElementById("phone2");
    var password=document.getElementById("password2");
    var reg=document.getElementById("reg");
    login.addEventListener("click",loginClickHandler);
    var topPhone=document.getElementById("top_phone_02");
    var topPassword=document.getElementById("top_password_2");

    phone.addEventListener("focus",focusHandler);
    phone.addEventListener("blur",blurHandler);

    password.addEventListener("focus",passFocusHandler);
    password.addEventListener("blur",passBlurHandler);

    /*-------------------注册事件--------------------*/
    function loginClickHandler(e) {
        var phoneBool=verifyPhoneReg();
        var passBool=verifyPassReg();
        var type=0;
        ajax(type);
        console.log(phoneBool,passBool);
        if(phoneBool && passBool){
            var type=2;
            ajax(type);
        }else {
            return;
        }
    }
    /*--------------------手机输入框失焦事件---------------*/
    function blurHandler(e) {
        verifyPhoneReg();
    }
    /*------------------手机输入框获得焦点事件--------------*/
    function focusHandler(e) {
        topPhone.style.border="1px solid #79bdd7"
    }
    /*------------------密码输入框获得焦点事件--------------*/
    function passFocusHandler(e) {
        topPassword.style.border="1px solid #79bdd7";
    }
    /*------------------密码输入框失焦事件-----------------*/
    function passBlurHandler(e) {
        verifyPassReg();
    }
    /*------------------创建错误信息div-------------------*/

    divStyle={
        fontSize:"12px",
        color:"#fa5b5b",
        width: "298px",
        lineHeight: "20px",
        verticalAlign: "top",
        wordBreak: "break-all",
        float:"left",
        display:"none"
    };
    var div=document.createElement("div");
    var span=document.createElement("span");
    Object.assign(div.style,divStyle);
    span.id="Regspan";
    var i=document.createElement("i");
    i.className="icon iconfont icon-chahao";
    i.style.color="#fa5b5b";
    i.style.fontSize="14px";
    div.appendChild(i);
    div.appendChild(span);
    reg.appendChild(div);

    /*-----------------验证手机号正则表达式---------------*/
    function verifyPhoneReg() {
        topPhone.style. border= "1px solid #c5cddb";
        var phoneReg=/^[1][3,4,5,7,8][0-9]{9}$/;
        if(phoneReg.test(phone.value)){
            div.style.display="none";
            span.textContent="";
            return true;
        }else if(phone.value.length===0){
            div.style.display="block";
            span.textContent="";
            span.textContent="请输入手机号";
            topPhone.style. border= "1px solid red";
            return false;
        }else{
            div.style.display="block";
            span.textContent="";
            span.textContent="手机号格式错误";
            topPhone.style. border= "1px solid red";
            return false;
        }
    }
    /*-----------------验证密码正则表达式----------------*/
    function verifyPassReg(e) {
        topPassword.style. border= "1px solid #c5cddb";
        var passReg=/^(\w){6,20}$/;
        if(passReg.test(password.value)){
            div.style.display="none";
            span.textContent="";
            return true;
        }else if(password.value.length===0){
            div.style.display="block";
            span.textContent="";
            span.textContent="请输入密码";
            topPassword.style.border="1px solid red";
            return false;
        }else {
            div.style.display="block";
            span.textContent="";
            span.textContent="格式错误，请输入6-20个字母、数字、下划线";
            topPassword.style.border="1px solid red";
            return false;
        }
    }
    /*-----------------生成json对象--------------------*/
    function getJson() {
        var obj={};
        obj.phone=phone.value;
        obj.password=password.value;
        return obj;
    }
    /*---------------------ajax----------------------*/
    function ajax(_type) {
        var objJson=getJson();
        objJson.type=_type;
        var xhr=new XMLHttpRequest();
        xhr.addEventListener("load",loadHandler);
        xhr.open("POST","http://10.9.48.182:3005");
        xhr.send(encodeURIComponent(JSON.stringify(objJson)));
    }
    function loadHandler(e) {
        var obj=JSON.parse(decodeURIComponent(this.response));
        console.log(obj.type);
        //判断是否登录成功（1、判断类型 2、判断msg是否为success）
        if(obj.type===0){
            if(obj.msg==="false"){
                div.style.display="block";
                span.textContent="";
                span.textContent="该手机账号未注册";
                return;
            }else{
                span.textContent="";
                div.style.display="none";
                return true;
            }
        }else if(obj.type===2){
            if(obj.msg==="passSuccess"){
                alert("登陆成功！");
                location.href="../index.html";
            }else if(obj.msg==="passFalse"){
                div.style.display="block";
                span.textContent="";
                span.textContent="账号或密码错误";
            }
        }else{
            alert("未知错误！");
        }
    }
</script>
</body>
</html>