<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>注册界面</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/foot.css">
    <link rel="stylesheet" href="font/iconfont.css">
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/register.css">

</head>
<body>
<!--top-->
<div class="logo_head_1">
    <div class="logo_head">
        <div class="load_head_left">
            <a href="#">
                <img src="img/koloa.jpg" alt="logo">
            </a>
        </div>
    </div>
</div>
<!--center-->
<div class="center_1">
    <div class="center">
        <img src="img/loginBg.jpg" alt="">
        <div class="regMenu_1">
            <div class="regMenu">
                <div class="regMenu_top">
                    <span class="text">欢迎注册</span>
                    <span class="text_r">
                        已有账号 ? <a href="#">去登陆></a>
                    </span>
                </div>
                <div class="regMenu_bottom">
                    <form action="#">
                        <div class="top_phone">
                            <span>
                                <i class="icon iconfont icon-phone"></i>
                            </span>
                            <input id="phone" name="phone" type="text" placeholder="请输入手机号">
                        </div>
                        <div class="top_img">
                            <img src="img/huakuai.bmp" alt="">
                        </div>
                        <div class="top_message">
                            <input id="message" name="message" type="text" placeholder="请输入短信验证码">
                            <span><a href="#">获取验证码</a></span>
                        </div>
                        <div class="top_password">
                            <span>
                                <i class="icon iconfont icon-suo"></i>
                            </span>
                            <input id="password" name="password" type="text" placeholder="请输入密码">
                        </div>
                        <div id="reg">

                        </div>
                        <div class="registerBtn">
                            <a id="register" href="#">注册</a>
                        </div>
                        <div class="agree">
                            <input class="checkBox" type="checkbox">
                            <span> 我同意《服务条款》《网易隐私政策》</span>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
<!--foot-->
<div class="footer_1 login_foot">
    <div class="footer">
        <div class="footer_div_01">
            <a href="#">About NetEase</a>
            <span class="sep">|</span>
            <a href="#">公司简介</a>
            <span class="sep">|</span>
            <a href="#">联系方法</a>
            <span class="sep">|</span>
            <a href="#">友情链接</a>
            <span class="sep">|</span>
            <a href="#">招聘信息</a>
            <span class="sep">|</span>
            <a href="#">客户服务</a>
            <span class="sep">|</span>
            <a href="#">隐私政策</a>
            <span class="sep">|</span>
            <a href="#">网络营销</a>
            <span class="sep">|</span>
            <a href="#">网易考拉</a>
        </div>
        <div>
            <span>网络文化经营许可证：浙网文[2016]0155-055号</span>
            <span>增值电信业务经营许可证：浙B2-20160288</span>
            <span><a href="#">自营经营者信息</a></span>
            <span>（浙）网械平台备字[2018]第00007号</span>
        </div>
        <div>
                    <span class="foot_span">
                        <a href="#"><img src="img/jinghui.png" alt=""></a>
                        <a href="#">（浙）网械平台备字[2018]第00007号</a>
                    </span>
            <span>网易公司版权所有©1997-2018</span>
            <span><a href="#">互联网药品信息服务资格证书编号（浙）-2017-0027</a></span>
            <span>浙ICP备16011229号-6</span>
        </div>
        <div class="foot-div">
            <a href="#"><img src="img/chengxin.png" alt=""></a>
            <a href="#"><img src="img/kexin.png" alt=""></a>
            <a href="#"><img src="img/gongan.gif" alt=""></a>
        </div>
    </div>
</div>


<script>

    var register=document.getElementById("register");
    var phone=document.getElementById("phone");
    var password=document.getElementById("password");
    var reg=document.getElementById("reg");
    register.addEventListener("click",registerClickHandler);
    var topPhone=document.getElementsByClassName("top_phone")[0];
    var topPassword=document.getElementsByClassName("top_password")[0];

    phone.addEventListener("focus",focusHandler);
    phone.addEventListener("blur",blurHandler);

    password.addEventListener("focus",passFocusHandler);
    password.addEventListener("blur",passBlurHandler);

    /*-------------------注册事件--------------------*/
    function registerClickHandler(e) {
        ajax();
    }
    /*------------------手机输入框失焦事件----------------*/
    function blurHandler(e) {
        verifyPhoneReg();
    }
    /*------------------手机输入框获得焦点事件-------------*/
    function focusHandler(e) {
        topPhone.style.border="1px solid #79bdd7"
    }
    /*------------------密码输入框失焦事件----------------*/
    function passFocusHandler(e) {
        topPassword.style.border="1px solid #79bdd7";
    }
    /*------------------密码输入框获得焦点事件-------------*/
    function passBlurHandler(e) {
        verifyPassReg();
    }

    /*----------------创建错误信息div-----------------*/
    divStyle={
        fontSize:"12px",
        color:"#fa5b5b",
        width: "298px",
        lineHeight: "20px",
        verticalAlign: "top",
        wordBreak: "break-all",
        float:"left",
        display:"none"
    };
    var div=document.createElement("div");
    var span=document.createElement("span");
    Object.assign(div.style,divStyle);
    span.id="Regspan";
    var i=document.createElement("i");
    i.className="icon iconfont icon-chahao";
    i.style.color="#fa5b5b";
    i.style.fontSize="14px";
    div.appendChild(i);
    div.appendChild(span);
    reg.appendChild(div);

    /*----------------验证手机号正则表达式--------------*/
    function verifyPhoneReg() {
        topPhone.style. border= "1px solid #c5cddb";
        var phoneReg=/^[1][3,4,5,7,8][0-9]{9}$/;
        if(phoneReg.test(phone.value)){
            return true;
            /*
            * 点击注册的时候再去判断---一会试试什么时候
            * 去服务器判断数据是否已经注册
            * 1）已注册，提示已注册错误信息
            * 2）未注册继续
            *
            * */
        }else if(phone.value.length===0){
            div.style.display="block";
            span.textContent="";
            span.textContent="手机号不能为空";
            //让边框为红色
            topPhone.style. border= "1px solid red";
            return false;
        }else{
            div.style.display="block";
            span.textContent="";
            span.textContent="手机号格式错误";
            //让边框为红色
            topPhone.style. border= "1px solid red";
            return false;
        }
    }
    /*验证密码*/
    function verifyPassReg(e) {
        //只能输入6-20个字母、数字、下划线
        var passReg=/^(\w){6,20}$/;
        if(passReg.test(password.value)){
            /*
            * 点击注册的时候再去判断---一会试试什么时候
            * 去服务器判断密码是否正确
            * 1）错误显示错误信息
            * 2）正确继续
            *
            * */
            return true;
        }else if(password.value.length===0){
            div.style.display="block";
            span.textContent="";
            span.textContent="密码不能为空！";
            topPassword.style.border="1px solid red";
            return false;
        }else {
            div.style.display="block";
            span.textContent="";
            span.textContent="格式错误，请输入6-20个字母、数字、下划线";
            topPassword.style.border="1px solid red";
            return false;
        }
    }

    /*----------------生成json对象-------------- */
    function getJson() {
        var obj={};

        obj.phone=phone.value;
        obj.password=password.value;
        console.log(obj);
        return obj;
    }
    /*--------------------ajax------------------*/
    function ajax() {
        var objJson=getJson();
        var xhr=new XMLHttpRequest();
        xhr.addEventListener("load",loadHandler);
        xhr.open("POST","http://10.9.48.182:3005");
        xhr.send(encodeURIComponent(JSON.stringify(objJson)));
    }

    function loadHandler(e) {

    }
</script>
</body>
</html>